@if (ViewBag.LoggedUserId > 0)
{
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}
@if (ViewBag.LoggedUserId < 0)
{
    Layout = "~/Views/Shared/_UnloggedLayout.cshtml";
}

@model LibraryWebApplication1.Models.User

@{
    ViewData["Title"] = "User Details";
}

<div class="card">
    <div class="card-body">
        <h5 class="card-title">@Model.Name details</h5>
        <hr />
        <dl class="row">
            <dt class="col-sm-2">ID:</dt>
            <dd class="col-sm-10">@Model.UserId</dd>

            <dt class="col-sm-2">Name:</dt>
            <dd class="col-sm-10">@Model.Name</dd>

            <dt class="col-sm-2">Surname:</dt>
            <dd class="col-sm-10">@Model.Surname</dd>
        </dl>
        <hr />

        <a asp-action="Index" class="btn btn-info">Back to list</a>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var downloadButtons = document.querySelectorAll('.download-file-btn');

        downloadButtons.forEach(function (button) {
            button.addEventListener('click', function () {
                var url = this.getAttribute('data-path');

                var anchor = document.createElement('a');
                anchor.href = url;
                anchor.target = '_blank';
                anchor.download = url.substring(url.lastIndexOf('/') + 1);
                document.body.appendChild(anchor);
                anchor.click();
                document.body.removeChild(anchor);
            });
        });
    });
</script>
